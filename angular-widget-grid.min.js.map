{"version":3,"file":"angular-widget-grid.min.js","sources":["angular-widget-grid.js"],"names":["angular","module","directive","scope","rendering","highlight","restrict","replace","template","link","element","update","children","remove","cellHeight","grid","cellSize","height","cellWidth","width","i","rows","j","columns","rect","document","createElementNS","XMLNS","x","y","setAttributeNS","COLOR_DEFAULT","COLOR_STROKE","append","resetHighlights","highlightedCells","cells","idx","length","cell","setAttribute","highlightArea","area","top","Math","max","bottom","min","left","right","COLOR_HIGHLIGHT","push","$watch","newVal","oldVal","equals","gridDirective","showGrid","controller","controllerAs","transclude","templateUrl","$element","$scope","$timeout","Grid","gridRenderer","addWidget","widget","self","add","updateRendering","removeWidget","updateGridSize","parseInt","resize","render","$broadcast","updateWidget","getWidgetStyle","getStyle","id","getPositions","offsetTop","offsetLeft","clientHeight","clientWidth","isObstructed","excludedArea","isAreaObstructed","fromBottom","fromRight","rasterizeCoords","this","gridOptions","isPositionObstructed","gridUtil","require","pre","attrs","widgetCtrl","templateContent","getTemplate","innerCompile","$document","gridCtrl","onDown","event","onMove","preventDefault","touches","clientX","clientY","dragPositionX","gridPositions","dragPositionY","requestedRender","moverOffset","startRender","currentFinalPos","determineFinalPos","startPos","widgetElement","css","onUp","off","eventMove","eventUp","finalPos","removeClass","setWidgetPosition","widgetContainer","parentElement","addClass","offsetX","layerX","offsetY","layerY","on","anchorTop","anchorLeft","floor","movedDown","movedRight","finalPosRequest","path","getPathIterator","hasNext","currPos","next","targetArea","areaObstructed","eventDown","window","navigator","pointerEnabled","INDEX_DRAGGER_N","INDEX_DRAGGER_E","INDEX_DRAGGER_S","INDEX_DRAGGER_W","INDEX_DRAGGER_NW","INDEX_DRAGGER_NE","INDEX_DRAGGER_SE","INDEX_DRAGGER_SW","MIN_HEIGHT","MIN_WIDTH","ADD_OFFSET","registerDragHandler","dragger","containerElement","up","delta","draggerOffset","down","removeAttr","foundCollision","requestedStartPoint","requestedEndPoint","requestedPos","container","offsetHeight","offsetWidth","draggerElements","draggers","$compile","Widget","position","editable","widgetOptions","getNodeIndex","index","elem","previousElementSibling","setPosition","$on","DEFAULT_COLUMNS","DEFAULT_ROWS","factory","options","computeCellSize","widgets","prototype","indexOf","splice","GridRendering","positions","gridWidth","gridHeight","getWidgetIdAt","widgetId","pos","expanding","verticalStart","verticalStep","verticalEnd","horizontalStart","horizontalStep","horizontalEnd","toString","display","DEFAULT_WIDTH","DEFAULT_HEIGHT","DEFAULT_TOP","DEFAULT_LEFT","getUID","style","service","sorted","sortWidgets","round","needsRepositioning","$templateCache","nextId","curr","comp","found","roundDecimal","decimal","rowCount","columnCount","templateName","get","endPos","topDelta","leftDelta","steps","abs","currStep","nextPos","currTopDelta","currLeftDelta","run","put"],"mappings":"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"}