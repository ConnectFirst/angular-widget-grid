{"version":3,"file":"angular-widget-grid.min.js","sources":["angular-widget-grid.js"],"names":["angular","module","directive","scope","rendering","highlight","restrict","replace","template","link","element","update","children","remove","cellHeight","grid","cellSize","height","cellWidth","width","i","rows","j","columns","rect","document","createElementNS","XMLNS","x","y","setAttributeNS","COLOR_DEFAULT","COLOR_STROKE","append","resetHighlights","highlightedCells","cells","idx","length","cell","setAttribute","highlightArea","area","top","Math","max","bottom","min","left","right","COLOR_HIGHLIGHT","push","$watch","newVal","oldVal","equals","gridDirective","showGrid","controller","controllerAs","transclude","templateUrl","$element","$scope","$timeout","Grid","gridRenderer","addWidget","widget","self","add","updateRendering","removeWidget","updateGridSize","parseInt","resize","render","$broadcast","updateWidget","getWidgetStyle","getStyle","id","getPositions","gridContainer","getBoundingClientRect","getClientRects","doc","ownerDocument","docElem","documentElement","window","pageYOffset","clientTop","pageXOffset","clientLeft","isObstructed","excludedArea","isAreaObstructed","fromBottom","fromRight","rasterizeCoords","clientWidth","clientHeight","this","gridOptions","isPositionObstructed","gridUtil","require","pre","attrs","widgetCtrl","templateContent","getTemplate","innerCompile","$document","gridCtrl","onDown","event","onMove","preventDefault","touches","clientX","clientY","dragPositionX","gridPositions","dragPositionY","requestedRender","moverOffset","startRender","currentFinalPos","determineFinalPos","startPos","widgetElement","css","onUp","off","eventMove","eventUp","finalPos","removeClass","setWidgetPosition","widgetContainer","parentElement","addClass","offsetTop","offsetLeft","offsetX","layerX","offsetY","layerY","on","anchorTop","anchorLeft","floor","movedDown","movedRight","finalPosRequest","path","getPathIterator","hasNext","currPos","next","targetArea","areaObstructed","eventDown","navigator","pointerEnabled","INDEX_DRAGGER_N","INDEX_DRAGGER_E","INDEX_DRAGGER_S","INDEX_DRAGGER_W","INDEX_DRAGGER_NW","INDEX_DRAGGER_NE","INDEX_DRAGGER_SE","INDEX_DRAGGER_SW","MIN_HEIGHT","MIN_WIDTH","ADD_OFFSET","registerDragHandler","dragger","containerElement","up","delta","draggerOffset","down","removeAttr","foundCollision","requestedStartPoint","requestedEndPoint","requestedPos","container","offsetHeight","offsetWidth","draggerElements","draggers","$compile","Widget","position","editable","widgetOptions","getNodeIndex","index","elem","previousElementSibling","setPosition","$on","DEFAULT_COLUMNS","DEFAULT_ROWS","factory","options","computeCellSize","widgets","prototype","indexOf","splice","GridRendering","positions","gridWidth","gridHeight","getWidgetIdAt","widgetId","pos","expanding","verticalStart","verticalStep","verticalEnd","horizontalStart","horizontalStep","horizontalEnd","toString","display","DEFAULT_WIDTH","DEFAULT_HEIGHT","DEFAULT_TOP","DEFAULT_LEFT","getUID","style","service","sorted","sortWidgets","round","needsRepositioning","$templateCache","nextId","curr","comp","found","roundDecimal","decimal","rowCount","columnCount","templateName","get","endPos","topDelta","leftDelta","steps","abs","currStep","nextPos","currTopDelta","currLeftDelta","run","put"],"mappings":"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"}