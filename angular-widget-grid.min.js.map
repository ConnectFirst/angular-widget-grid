{"version":3,"file":"angular-widget-grid.min.js","sources":["angular-widget-grid.js"],"names":["angular","module","directive","scope","rendering","highlight","restrict","replace","template","link","element","update","children","remove","cellHeight","grid","cellSize","height","cellWidth","width","i","rows","j","columns","rect","document","createElementNS","XMLNS","x","y","setAttributeNS","COLOR_DEFAULT","COLOR_STROKE","append","resetHighlights","highlightedCells","cells","idx","length","cell","setAttribute","highlightArea","area","top","Math","max","bottom","min","left","right","COLOR_HIGHLIGHT","push","$watch","newVal","oldVal","equals","gridDirective","showGrid","controller","controllerAs","transclude","templateUrl","$element","$scope","$timeout","Grid","gridRenderer","addWidget","widget","self","add","updateRendering","removeWidget","updateGridSize","parseInt","resize","render","$broadcast","updateWidget","getWidgetStyle","getStyle","id","getPositions","gridContainer","getBoundingClientRect","getClientRects","doc","ownerDocument","docElem","documentElement","window","pageYOffset","clientTop","pageXOffset","clientLeft","isObstructed","excludedArea","isAreaObstructed","fromBottom","fromRight","rasterizeCoords","clientWidth","clientHeight","this","gridOptions","isPositionObstructed","gridUtil","require","pre","attrs","widgetCtrl","templateContent","getTemplate","innerCompile","$document","gridCtrl","onDown","event","onMove","preventDefault","isObject","originalEvent","touches","clientX","clientY","dragPositionX","round","gridPositions","dragPositionY","requestedRender","moverOffset","startRender","currentFinalPos","determineFinalPos","startPos","widgetElement","css","onUp","off","eventMove","eventUp","finalPos","removeClass","setWidgetPosition","widgetContainer","parentElement","addClass","offsetTop","offsetLeft","offsetX","layerX","offsetY","layerY","on","anchorTop","anchorLeft","floor","movedDown","movedRight","finalPosRequest","path","getPathIterator","hasNext","currPos","next","targetArea","areaObstructed","eventDown","navigator","pointerEnabled","INDEX_DRAGGER_N","INDEX_DRAGGER_E","INDEX_DRAGGER_S","INDEX_DRAGGER_W","INDEX_DRAGGER_NW","INDEX_DRAGGER_NE","INDEX_DRAGGER_SE","INDEX_DRAGGER_SW","MIN_HEIGHT","MIN_WIDTH","ADD_OFFSET","registerDragHandler","dragger","containerElement","up","delta","draggerOffset","down","removeAttr","foundCollision","requestedStartPoint","requestedEndPoint","requestedPos","container","offsetHeight","offsetWidth","draggerElements","draggers","$compile","Widget","position","editable","widgetOptions","getNodeIndex","index","elem","previousElementSibling","setPosition","$on","DEFAULT_COLUMNS","DEFAULT_ROWS","factory","options","computeCellSize","widgets","prototype","indexOf","splice","GridRendering","positions","gridWidth","gridHeight","getWidgetIdAt","widgetId","pos","expanding","verticalStart","verticalStep","verticalEnd","horizontalStart","horizontalStep","horizontalEnd","toString","display","DEFAULT_WIDTH","DEFAULT_HEIGHT","DEFAULT_TOP","DEFAULT_LEFT","getUID","style","service","sorted","sortWidgets","needsRepositioning","$templateCache","nextId","curr","comp","found","roundDecimal","decimal","rowCount","columnCount","templateName","get","endPos","topDelta","leftDelta","steps","abs","currStep","nextPos","currTopDelta","currLeftDelta","run","put"],"mappings":"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"}